<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZUSOS</title>
    <link rel="stylesheet" href="../style/mainstyles.css">
    <link rel="shortcut icon" href="../images/favicon.svg" type="image/x-icon">
    <link rel="stylesheet" href="../styles.css">
    <link rel="stylesheet" href="../style/schedule.css">
    <script src="../scripts/auth.js"></script>
    <script src="../scripts/admin_site_link.js"></script>
    <style>
        nav .animation{
        position: absolute;
        left: 188px;
        width: 160px;
        height: 50px;
        background-color: #333a41;
        border-radius: 10px;
        transition: all 0.3s ease 0s;
    }
        nav a:nth-of-type(1):hover~.animation{
        transform: translateX(-178px);
    }
        nav a:nth-of-type(3):hover~.animation{
        transform: translateX(178px);
    }
    nav a:nth-of-type(4):hover~.animation{
        transform: translateX(358px) scaleX(1);
    }
    nav a:nth-of-type(5):hover ~ .animation{
        transform: translateX(563px) scaleX(150%);
    }

    </style>
</head>
<body>
    <nav>
      <a href="../index.html">AKTUALNO≈öCI</a>
      <a href="schedule.html">PLAN ZAJƒòƒÜ</a>
      <a id="oceny" href="grades.html">OCENY</a>
      <a id="frekwencja" href="frekwencja.html">FREKWENCJA</a>
      <div class="animation"></div>
      <div class="hamburger">
        <div class="stick first"></div>
        <div class="stick second"></div>
        <div class="stick third"></div>
      </div>
    </nav>
    <div class="avatar"><img alt="awatar" /></div>
    <main>
      <div class="nav-links">
        <ul>
          <li><a href="../index.html">AKTUALNO≈öCI</a></li>
          <li><a href="schedule.html">PLAN ZAJƒòƒÜ</a></li>
          <li id="liOceny"><a href="grades.html">OCENY</a></li>
          <li><a id="frekwencja" href="frekwencja.html">FREKWENCJA</a></li>
        </ul>
      </div>

        <div class="avatar-links">
            <ul>
                <li><a href="/sites/omnie.html">O MNIE</a></li>
                <li><a href="change_password.html">ZMIE≈É HAS≈ÅO</a></li>
                <li><a href="#" onclick="wyloguj()">WYLOGUJ SIƒò</a></li>
            </ul>
        </div>
        <script src="../scripts/nav-click.js"></script>

        
            <div class="schedule-container" id="schedule">
    <div class="schedule-header">
        <div></div>
        <div>PON</div>
        <div>WT</div>
        <div>≈öR</div>
        <div>CZW</div>
        <div>PT</div>
    </div>
</div>

<script>
const dni = ['Poniedzia≈Çek', 'Wtorek', '≈öroda', 'Czwartek', 'PiƒÖtek'];
const godziny = ['08:00', '09:30', '11:00', '12:30', '14:00', '15:30'];

async function pobierzPlan() {

    const klasa = localStorage.getItem('userklasa');
    const nazwisko = localStorage.getItem('userNazwisko');


    if (!klasa) {
        console.error('Brak klasy w localStorage');
        return;
    }

    let url = `/api/plan?klasa=${encodeURIComponent(klasa)}`;

    if (klasa === 'Nauczyciel' || klasa === 'szlachta') {
        url += `&nazwisko=${encodeURIComponent(nazwisko)}`;
    }

    const res = await fetch(url);
    const zajecia = await res.json();

    console.log('PLAN:', zajecia); // üëà debug

    const container = document.getElementById('schedule');

    // czy≈õcimy stare wiersze
    container.querySelectorAll('.schedule-row').forEach(e => e.remove());

    const mapa = {};
    zajecia.forEach(z => {
        if (!mapa[z.dzien]) mapa[z.dzien] = {};
        mapa[z.dzien][z.godzinaOd] = z;
    });

    godziny.forEach(godzina => {
        const row = document.createElement('div');
        row.className = 'schedule-row';

        row.innerHTML = `<div class="hour">${godzina}</div>`;

        dni.forEach(dzien => {
            const cell = document.createElement('div');
            const z = mapa[dzien]?.[godzina];

            if (z) {
                cell.className = 'lesson';
                cell.innerHTML = `
                    <strong>${z.nazwa}</strong><br>
                    <span>${z.sala || ''}</span><br>
                    <small>${z.prowadzacy}</small>
                `;
            }

            row.appendChild(cell);
        });

        container.appendChild(row);
    });
}

pobierzPlan();
</script>

        
        
    </main>
    <div class="carousel">
      <div class="group">
        <div class="card"><a href="https://x.com/uwm_olsztyn"><img src="images/x-logo-removebg-preview.png" alt="x-logo"></a></div>
        <div class="card"><a href="https://www.facebook.com/UWM.Olsztyn/?locale=pl_PL"><img src="images/facebook-logo-removebg-preview.png" alt="x-logo"></a></div>
        <div class="card"><a href="https://uwm.edu.pl/"><img src="images/uwm-logo.jpg" alt="x-logo"></a></div>
        <div class="card"><a href="https://moodle.uwm.edu.pl/"><img src="images/images-removebg-preview.png" alt="x-logo"></a></div>
        <div class="card"><a href="https://www.youtube.com/@zmijewskitomasz"><img src="images/youtube-removebg-preview.png" alt="youtube-logo"></a></div>
      </div>
      <div  aria-hidden class="group">
        <div class="card"><a href="https://x.com/uwm_olsztyn"><img src="images/x-logo-removebg-preview.png" alt="x-logo"></a></div>
        <div class="card"><a href="https://www.facebook.com/UWM.Olsztyn/?locale=pl_PL"><img src="images/facebook-logo-removebg-preview.png" alt="x-logo"></a></div>
        <div class="card"><a href="https://uwm.edu.pl/"><img src="images/uwm-logo.jpg" alt="x-logo"></a></div>
        <div class="card"><a href="https://moodle.uwm.edu.pl/"><img src="images/images-removebg-preview.png" alt="x-logo"></a></div>
        <div class="card"><a href="https://www.youtube.com/@zmijewskitomasz"><img src="images/youtube-removebg-preview.png" alt="youtube-logo"></a></div>
      </div>
    </div>
    <footer>
        <address>
           <p>Kontakt: zusos@gmail.com <br> 
            +48 012 345 678</p>
        </address>
        <span>Wszelkie prawa zastrze≈ºone ¬© 2025</span>
        
        
    </footer>
</body>
</html>